{"ast":null,"code":"import _slicedToArray from \"/home/zeus/Personal/Portfolio-V2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { SimplexNoise } from 'three-stdlib';\nconst CameraShake =\n/*#__PURE__*/\nReact.forwardRef(({\n  intensity = 1,\n  decay,\n  decayRate = 0.65,\n  maxYaw = 0.1,\n  maxPitch = 0.1,\n  maxRoll = 0.1,\n  yawFrequency = 0.1,\n  pitchFrequency = 0.1,\n  rollFrequency = 0.1,\n  controls\n}, ref) => {\n  const camera = useThree(state => state.camera); // @ts-expect-error new in @react-three/fiber@7.0.5\n\n  const defaultControls = useThree(state => state.controls);\n  const intensityRef = React.useRef(intensity);\n  const initialRotation = React.useRef(camera.rotation.clone());\n\n  const _React$useState = React.useState(() => new SimplexNoise()),\n        _React$useState2 = _slicedToArray(_React$useState, 1),\n        yawNoise = _React$useState2[0];\n\n  const _React$useState3 = React.useState(() => new SimplexNoise()),\n        _React$useState4 = _slicedToArray(_React$useState3, 1),\n        pitchNoise = _React$useState4[0];\n\n  const _React$useState5 = React.useState(() => new SimplexNoise()),\n        _React$useState6 = _slicedToArray(_React$useState5, 1),\n        rollNoise = _React$useState6[0];\n\n  const constrainIntensity = () => {\n    if (intensityRef.current < 0 || intensityRef.current > 1) {\n      intensityRef.current = intensityRef.current < 0 ? 0 : 1;\n    }\n  };\n\n  React.useImperativeHandle(ref, () => ({\n    getIntensity: () => intensityRef.current,\n    setIntensity: val => {\n      intensityRef.current = val;\n      constrainIntensity();\n    }\n  }), []);\n  React.useEffect(() => {\n    const currControls = defaultControls || (controls == null ? void 0 : controls.current);\n\n    const callback = () => void (initialRotation.current = camera.rotation.clone());\n\n    currControls == null ? void 0 : currControls.addEventListener('change', callback);\n    return () => void (currControls == null ? void 0 : currControls.removeEventListener('change', callback));\n  }, [controls, defaultControls]);\n  useFrame(({\n    clock\n  }, delta) => {\n    const shake = Math.pow(intensityRef.current, 2);\n    const yaw = maxYaw * shake * yawNoise.noise(clock.elapsedTime * yawFrequency, 1);\n    const pitch = maxPitch * shake * pitchNoise.noise(clock.elapsedTime * pitchFrequency, 1);\n    const roll = maxRoll * shake * rollNoise.noise(clock.elapsedTime * rollFrequency, 1);\n    camera.rotation.set(initialRotation.current.x + pitch, initialRotation.current.y + yaw, initialRotation.current.z + roll);\n\n    if (decay && intensityRef.current > 0) {\n      intensityRef.current -= decayRate * delta;\n      constrainIntensity();\n    }\n  });\n  return null;\n});\nexport { CameraShake };","map":null,"metadata":{},"sourceType":"module"}